<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask OIDC Config Validator</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <main class="container">
        <header>
            <h1>Flask OIDC Config Validator</h1>
            <p>Paste your .env or config file content below to validate it.</p>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <section class="flash-messages" role="alert" aria-live="polite">
            {% for category, message in messages %}
            <div class="flash-{{ category }}" role="alert">{{ message }}</div>
            {% endfor %}
        </section>
        {% endif %}
        {% endwith %}
        
        <section>
            <form method="POST" novalidate>
                {{ csrf_token() }}
                <label for="config-input">Configuration Content:</label>
                <textarea 
                    id="config-input" 
                    name="config" 
                    rows="10" 
                    cols="80"
                    placeholder="CLIENT_ID=your-client-id&#10;CLIENT_SECRET=your-client-secret&#10;TENANT_ID=your-tenant-id&#10;AUTHORITY=https://login.microsoftonline.com/your-tenant-id&#10;REDIRECT_URI=https://localhost:5000/getAToken&#10;SCOPE=openid profile email"
                    aria-describedby="config-help">{{ config_text }}</textarea>
                <small id="config-help">Enter your OIDC configuration in .env format (one variable per line)</small>
                <br>
                <button type="submit" aria-label="Validate configuration">Validate Configuration</button>
            </form>
        </section>

        {% if results %}
        <section aria-labelledby="results-heading">
            <h2 id="results-heading">Validation Results</h2>
            <ul class="results" role="list">
                {% for result in results %}
                <li class="result-{{ result.level.lower() }}" role="listitem">
                    <span class="result-level" aria-label="{{ result.level }} level">{{ result.level }}</span>: 
                    <span class="result-message">{{ result.message }}</span>
                </li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}
    </main>
</body>
</html>
